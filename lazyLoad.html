<html>
  <head>
    <title>test</title>
  </head>
  <body>
    <div>
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
      <img src="zz.png" data-src="b.jpg" />
    </div>
    <script>
      let img = document.getElementsByTagName("img");
      let num = img.length;
      let count = 0;

      lazyload();

      function throttle(fn, interval) {
        let flag = false; // flag to indicate whether the callback is running
        return function (e) {
          if (flag) {
            // if callback is running, return immediately
            return;
          }
          flag = true; // stack the callback
          setTimeout(() => {
            fn(e);
            flag = false; // when callback is finished, set the flag to false
          }, interval);
        };
      }
      window.addEventListener("scroll", throttle(lazyload, 100));
      function lazyload() {
        let viewHeight = document.documentElement.clientHeight;
        let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop;
        for (let i = count; i < num; i++) {
          if (img[i].offsetTop < scrollTop + viewHeight) {
            if (img[i].getAttribute("src") !== "zz.png") continue;
            img[i].src = img[i].getAttribute("data-src");
            count++;
            break;
          }
        }
      }
    </script>
  </body>
</html>
